<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program - Gema Nusa</title>
    <meta name="description" content="Temukan program lingkungan yang sesuai dengan passion dan kemampuanmu melalui Luma Quest.">
    <link rel="icon" href="/assets/img/logo/Logo-Light-Solid.png" type="image">
    
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/css/luma-ai.css">
    <script src="/assets/js/tailwind-config.js"></script>
    
    <link rel="icon" href="/assets/img/logo/Logo-Light-Solid.png" type="image/x-icon">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Custom TailwindCSS Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'nusantara-green': '#2D5A27',
                        'tradisi-gold': '#D4AF37',
                        'samudra-blue': '#1B4B73',
                        'kapas-white': '#FEFEFE',
                        'batu-gray': '#4A5568'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'display': ['Poppins', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- Responsive Styles -->
    <style>
        /* Mobile-first responsive styles */
        @media (max-width: 640px) {
            .mobile-container {
                padding: 0 12px;
            }
            
            .mobile-search-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .mobile-filter-tabs {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
            }
            
            .mobile-filter-btn {
                padding: 8px 6px;
                font-size: 11px;
                min-width: auto;
                flex: 1;
                min-width: 0;
                border-radius: 8px;
                height: 36px;
            }
            
            .mobile-program-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .mobile-program-card {
                padding: 10px;
            }
            
            .mobile-program-title {
                font-size: 13px;
                line-height: 1.2;
            }
            
            .mobile-program-desc {
                font-size: 10px;
                line-height: 1.2;
            }
            
            .mobile-program-details {
                flex-wrap: wrap;
                gap: 4px;
                margin-bottom: 6px;
            }
            
            .mobile-program-detail {
                font-size: 9px;
                padding: 3px 5px;
            }
            
            .mobile-program-actions {
                flex-direction: column;
                gap: 6px;
            }
            
            .mobile-join-btn, .mobile-detail-btn {
                width: 100%;
                padding: 6px;
                font-size: 11px;
            }
            
            .mobile-impact {
                font-size: 9px;
                line-height: 1.2;
            }
            
            /* Hide commitment time on mobile */
            .mobile-commitment {
                display: none;
            }
        }
        
        /* Tablet styles */
        @media (min-width: 641px) and (max-width: 1024px) {
            .mobile-program-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
        }
        
        /* Desktop styles */
        @media (min-width: 1025px) {
            .mobile-program-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            /* Show commitment time on desktop */
            .mobile-commitment {
                display: block;
            }
        }
        
        /* Custom scrollbar for mobile */
        @media (max-width: 640px) {
            ::-webkit-scrollbar {
                width: 4px;
            }
            
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            
            ::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 2px;
            }
        }
        
        /* Smooth animations */
        .mobile-transition {
            transition: all 0.3s ease;
        }
        
        /* Fix for filter button text visibility */
        .filter-btn span {
            display: inline !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Ensure text doesn't overflow in mobile */
        .text-truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .text-truncate-1 {
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-kapas-white text-batu-gray">
    <main>
        <!-- Program Catalog -->
        <section id="program-catalog"></section>
    </main>
    
    <!-- Footer -->
    <footer id="footer"></footer>
    
    <!-- Scripts -->
    <script src="../assets/js/core/component-loader.js"></script>
    <script src="../assets/js/programJS/program-catalog.js"></script>
    
    <!-- Quest Integration Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM Content Loaded - Program Page")
            
            // Check for quest results from localStorage
            const questResults = localStorage.getItem('luma_quest_results')
            if (questResults) {
                try {
                    const results = JSON.parse(questResults)
                    console.log('Quest results found:', results)
                    
                    // Highlight recommended programs
                    if (window.programCatalog && results.results) {
                        setTimeout(() => {
                            results.results.forEach(([programId], index) => {
                                if (index === 0) {
                                    window.programCatalog.highlightProgram(programId)
                                }
                            })
                        }, 1500)
                    }
                    
                    // Clear quest results after processing
                    localStorage.removeItem('luma_quest_results')
                } catch (e) {
                    console.error('Error parsing quest results:', e)
                }
            }
            
            // Handle URL parameters for direct program highlighting
            const urlParams = new URLSearchParams(window.location.search)
            const highlightProgram = urlParams.get('highlight')
            
            if (highlightProgram) {
                setTimeout(() => {
                    if (window.programCatalog) {
                        window.programCatalog.highlightProgram(highlightProgram)
                    }
                }, 1000)
            }
        })
        
        // Initialize program catalog after components are loaded
        setTimeout(() => {
            if (!window.programCatalog) {
                console.log("Initializing program catalog...")
                if (typeof ProgramCatalog !== 'undefined') {
                    window.programCatalog = new ProgramCatalog()
                }
            }
        }, 1000)
    </script>
    <script src="../assets/js/luma-chatbot.js"></script>
    <script src="../assets/js/main.js"></script>
</body>
</html>